const $=(s,e=document)=>e.querySelector(s),$$=(s,e=document)=>Array.from(e.querySelectorAll(s)),body=document.body;(function(){const s=$("#menuToggle"),e=$("#primary-navigation");if(!s||!e)return;const a=Array.from(e.querySelectorAll("a")),i=window.matchMedia?.("(min-width: 769px)"),n=()=>i?.matches??window.innerWidth>=769,t=o=>{if(n()){e.classList.remove("active"),e.setAttribute("data-state","open"),e.setAttribute("aria-hidden","false"),s.setAttribute("aria-expanded","false"),body.classList.remove("menu-open");return}e.classList.toggle("active",o),e.setAttribute("data-state",o?"open":"closed"),e.setAttribute("aria-hidden",String(!o)),s.setAttribute("aria-expanded",String(o)),body.classList.toggle("menu-open",o)},r=()=>t(!1),c=()=>{if(n())return;const o=e.getAttribute("data-state")==="open";t(!o)};if(t(!1),s.addEventListener("click",o=>{n()||(o.stopPropagation(),c(),e.getAttribute("data-state")==="open"&&a[0]?.focus({preventScroll:!0}))}),a.forEach(o=>{o.addEventListener("click",()=>{r()})}),document.addEventListener("keydown",o=>{n()||o.key==="Escape"&&(r(),s.focus({preventScroll:!0}))}),document.addEventListener("click",o=>{n()||!(e.getAttribute("data-state")==="open")||e.contains(o.target)||s.contains(o.target)||r()}),i){const o=l=>{l.matches&&r()};i.addEventListener?.("change",o)??i.addListener(o)}})(),function(){const s=$(".navbar");if(!s)return;const e=()=>{s.classList.toggle("scrolled",window.scrollY>8)};e(),window.addEventListener("scroll",e,{passive:!0})}(),function(){const s=$("#darkToggle"),e=s?.querySelector("i"),a=t=>{e&&(e.classList.toggle("fa-moon",!t),e.classList.toggle("fa-sun",t))},i=(t,{persist:r=!1}={})=>{if(t==="dark")body.classList.add("dark-mode"),body.classList.remove("light-forced"),a(!0),r&&localStorage.setItem("theme","dark");else if(t==="light")body.classList.remove("dark-mode"),body.classList.add("light-forced"),a(!1),r&&localStorage.setItem("theme","light");else{localStorage.removeItem("theme"),body.classList.remove("light-forced");const c=window.matchMedia?.("(prefers-color-scheme: dark)").matches;body.classList.toggle("dark-mode",c),a(c)}},n=localStorage.getItem("theme");i(n||"auto"),window.matchMedia&&matchMedia("(prefers-color-scheme: dark)").addEventListener?.("change",()=>{localStorage.getItem("theme")||i("auto")}),s?.addEventListener("click",()=>{const t=body.classList.contains("dark-mode");i(t?"light":"dark",{persist:!0})})}(),function(){const s=$$('a[href^="#"]:not([href="#"])'),e=$(".navbar")?.offsetHeight||0;s.forEach(a=>{a.addEventListener("click",i=>{const n=a.getAttribute("href"),t=document.querySelector(n);if(!t)return;i.preventDefault();const r=t.getBoundingClientRect().top+window.scrollY-(e+8);window.scrollTo({top:r,behavior:"smooth"}),history.pushState(null,"",n)})})}(),function(){const s=new Map($$('#primary-navigation a[href^="#"]').map(t=>[t.getAttribute("href").slice(1),t]));if(!s.size)return;const e=$$("main section[id]");if(!e.length)return;const a=t=>{s.forEach((r,c)=>{r.classList.toggle("active",c===t)})},i=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&a(r.target.id)})},{rootMargin:"-45% 0px -45% 0px",threshold:.2});e.forEach(t=>i.observe(t));const n=location.hash.replace("#","");n&&s.has(n)?a(n):a(e[0].id)}();
